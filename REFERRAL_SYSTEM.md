# –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –Ω–µ–¥–µ–ª—å–Ω—ã–º –ª–∏–¥–µ—Ä–±–æ—Ä–¥–æ–º

## –û–±–∑–æ—Ä

–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ **–Ω–µ–¥–µ–ª—å–Ω—ã—Ö —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π –ø–æ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—é –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤**.

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
- ‚úÖ –ú–µ—Å—Ç–æ –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è **–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ù–û–í–´–• —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é**
- ‚úÖ –í—ã–ø–ª–∞—Ç–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ **–ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –í–°–ï–• —Ç—Ä–∞—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤** (–∏ —Å—Ç–∞—Ä—ã—Ö, –∏ –Ω–æ–≤—ã—Ö)
- ‚úÖ –ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é **—Å—á—ë—Ç—á–∏–∫ –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –æ–±–Ω—É–ª—è–µ—Ç—Å—è** - –≤—Å–µ —Å—Ç–∞—Ä—Ç—É—é—Ç —Å –Ω—É–ª—è
- ‚úÖ –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **—Ä–∞–≤–Ω—ã–µ —É—Å–ª–æ–≤–∏—è** –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é

## –ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º

| –ú–µ—Å—Ç–æ –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ | –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç —Ç—Ä–∞—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ |
|-------------------|------------------|---------------------------|
| ü•á 1 –º–µ—Å—Ç–æ        | **10 –Ω–æ–≤—ã—Ö**     | **15%**                   |
| ü•à 2 –º–µ—Å—Ç–æ        | **7 –Ω–æ–≤—ã—Ö**      | **13%**                   |
| ü•â 3 –º–µ—Å—Ç–æ        | **5 –Ω–æ–≤—ã—Ö**      | **11%**                   |
| –û—Å—Ç–∞–ª—å–Ω—ã–µ         | **1+ –Ω–æ–≤—ã—Ö**     | **10%**                   |

**–í–∞–∂–Ω–æ:** –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–∑–æ–≤–æ–≥–æ –º–µ—Å—Ç–∞, –Ω—É–∂–Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞–Ω—è—Ç—å —ç—Ç—É –ø–æ–∑–∏—Ü–∏—é, –Ω–æ –∏ –¥–æ—Å—Ç–∏—á—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤. –ï—Å–ª–∏ –ø–æ—Ä–æ–≥ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç, —É—á–∞—Å—Ç–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ 10%.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### 1. –í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏ (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)

**–ö–æ–≥–¥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª** (—á–µ—Ä–µ–∑ `/api/referral/register`):
- –°—á—ë—Ç—á–∏–∫ `newReferrals` —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ +1
- –≠—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–∑–∏—Ü–∏—é –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ

**–ö–æ–≥–¥–∞ —Ä–µ—Ñ–µ—Ä–∞–ª –ø–æ–ø–æ–ª–Ω—è–µ—Ç –±–∞–ª–∞–Ω—Å** (—á–µ—Ä–µ–∑ `/api/payment/deposit`):
- –°—É–º–º–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ `totalSpending` —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
- –≠—Ç–æ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–∑–∏—Ü–∏—é –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ
- –≠—Ç–æ –≤–ª–∏—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä–∞–∑–º–µ—Ä –≤—ã–ø–ª–∞—Ç—ã

### 2. –í –∫–æ–Ω—Ü–µ –Ω–µ–¥–µ–ª–∏ (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 23:59 –∏–ª–∏ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 00:00)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–ª–∞—Ç:
1. –í—Å–µ —Ä–µ—Ñ–µ—Ä–µ—Ä—ã **—Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤** (newReferrals)
2. –ö–∞–∂–¥–æ–º—É –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è **–ø–æ–∑–∏—Ü–∏—è** –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ
   - **–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ —É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤, –æ–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç **–æ–¥–∏–Ω–∞–∫–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é** –∏ **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç**
   - –ü—Ä–∏–º–µ—Ä: 3 —á–µ–ª–æ–≤–µ–∫–∞ –ø—Ä–∏–≤–ª–µ–∫–ª–∏ –ø–æ 10 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ ‚Üí –≤—Å–µ –ø–æ–ª—É—á–∞—é—Ç 1 –º–µ—Å—Ç–æ (15%), —Å–ª–µ–¥—É—é—â–∏–π —É—á–∞—Å—Ç–Ω–∏–∫ –ø–æ–ª—É—á–∏—Ç 4 –º–µ—Å—Ç–æ
3. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è **–ø—Ä–æ—Ü–µ–Ω—Ç** –≤—ã–ø–ª–∞—Ç—ã (15%, 13%, 11%, 10%)
4. –ù–∞—á–∏—Å–ª—è—é—Ç—Å—è **—Ç–æ–∫–µ–Ω—ã** –ø–æ —Ñ–æ—Ä–º—É–ª–µ: `totalSpending √ó –ø—Ä–æ—Ü–µ–Ω—Ç / 100`
5. –°–æ–∑–¥–∞—ë—Ç—Å—è **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è** —Å —Ç–∏–ø–æ–º `referral_bonus`
6. –°—á—ë—Ç—á–∏–∫ `newReferrals` **–æ–±–Ω—É–ª—è–µ—Ç—Å—è** –¥–ª—è –Ω–æ–≤–æ–π –Ω–µ–¥–µ–ª–∏

### 3. –ù–æ–≤–∞—è –Ω–µ–¥–µ–ª—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞

- –°—á—ë—Ç—á–∏–∫ `newReferrals` = 0 –¥–ª—è –≤—Å–µ—Ö
- –°—á—ë—Ç—á–∏–∫ `totalSpending` = 0 –¥–ª—è –≤—Å–µ—Ö
- –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤ —Ä–∞–≤–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–∞

### –ü—Ä–∏–º–µ—Ä 1: –ò–≤–∞–Ω - –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ—Ñ–µ—Ä–µ—Ä

**–ù–µ–¥–µ–ª—è 1:**
- –ü—Ä–∏–≤–ª—ë–∫ **15 –Ω–æ–≤—ã—Ö** —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ ‚Üí **1 –º–µ—Å—Ç–æ**
- –û–Ω–∏ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ 8,000‚ÇΩ
- –ï–≥–æ —Å—Ç–∞—Ä—ã–µ —Ä–µ—Ñ–µ—Ä–∞–ª—ã –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ 2,000‚ÇΩ
- –í—Å–µ–≥–æ —Ç—Ä–∞—Ç: **10,000‚ÇΩ**
- –í—ã–ø–ª–∞—Ç–∞: `10,000 √ó 15% = 1,500 —Ç–æ–∫–µ–Ω–æ–≤`

**–ù–µ–¥–µ–ª—è 2:**
- –°—á—ë—Ç—á–∏–∫ –Ω–æ–≤—ã—Ö –æ–±–Ω—É–ª–∏–ª—Å—è
- –ü—Ä–∏–≤–ª—ë–∫ **3 –Ω–æ–≤—ã—Ö** —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ ‚Üí **5 –º–µ—Å—Ç–æ**
- –í—Å–µ –µ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª—ã (—Å—Ç–∞—Ä—ã–µ + –Ω–æ–≤—ã–µ) –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ **15,000‚ÇΩ**
- –í—ã–ø–ª–∞—Ç–∞: `15,000 √ó 10% = 1,500 —Ç–æ–∫–µ–Ω–æ–≤`

### –ü—Ä–∏–º–µ—Ä 2: –ü–µ—Ç—Ä - –Ω–æ–≤–∏—á–æ–∫

**–ù–µ–¥–µ–ª—è 1:**
- –£ –ü–µ—Ç—Ä–∞ 0 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- –ü—Ä–∏–≤–ª—ë–∫ **10 –Ω–æ–≤—ã—Ö** —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ ‚Üí **2 –º–µ—Å—Ç–æ**
- –û–Ω–∏ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ 5,000‚ÇΩ
- –í—ã–ø–ª–∞—Ç–∞: `5,000 √ó 13% = 650 —Ç–æ–∫–µ–Ω–æ–≤`

**–ù–µ–¥–µ–ª—è 2:**
- –ü—Ä–∏–≤–ª—ë–∫ **20 –Ω–æ–≤—ã—Ö** —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ ‚Üí **1 –º–µ—Å—Ç–æ**!
- –í—Å–µ 30 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ 20,000‚ÇΩ
- –í—ã–ø–ª–∞—Ç–∞: `20,000 √ó 15% = 3,000 —Ç–æ–∫–µ–Ω–æ–≤`

### –ü—Ä–∏–º–µ—Ä 3: –ê–Ω–Ω–∞ - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è

**–ù–µ–¥–µ–ª—è 1:**
- –£ –ê–Ω–Ω—ã —É–∂–µ 100 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- –ü—Ä–∏–≤–ª–µ–∫–ª–∞ —Ç–æ–ª—å–∫–æ **2 –Ω–æ–≤—ã—Ö** ‚Üí **8 –º–µ—Å—Ç–æ**
- –í—Å–µ 102 —Ä–µ—Ñ–µ—Ä–∞–ª–∞ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ 25,000‚ÇΩ
- –í—ã–ø–ª–∞—Ç–∞: `25,000 √ó 10% = 2,500 —Ç–æ–∫–µ–Ω–æ–≤`

**–ü–æ—á–µ–º—É —Ç–∞–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞:**
- –ò–≤–∞–Ω –∑–∞—Ä–∞–±–æ—Ç–∞–ª 1,500 —Ç–æ–∫–µ–Ω–æ–≤ —Å 10,000‚ÇΩ —Ç—Ä–∞—Ç (–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ)
- –ê–Ω–Ω–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∞ 2,500 —Ç–æ–∫–µ–Ω–æ–≤ —Å 25,000‚ÇΩ —Ç—Ä–∞—Ç (–±–æ–ª—å—à–∞—è –±–∞–∑–∞)
- –û–±–∞ –¥–æ–≤–æ–ª—å–Ω—ã: –æ–¥–∏–Ω –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏–≤–ª–µ–∫–∞—Ç—å, –¥—Ä—É–≥–∞—è - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –ü—Ä–∏–º–µ—Ä 4: –†–∞–≤–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º)

**–ù–µ–¥–µ–ª—è 1:**

| –£—á–∞—Å—Ç–Ω–∏–∫ | –ù–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ | –¢—Ä–∞—Ç—ã –≤—Å–µ—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ | –ú–µ—Å—Ç–æ | –î–æ—Å—Ç–∏–≥ –ø–æ—Ä–æ–≥–∞? | –ü—Ä–æ—Ü–µ–Ω—Ç | –í—ã–ø–ª–∞—Ç–∞ |
|----------|----------------|---------------------|-------|---------------|---------|---------|
| –ê–ª–µ–∫—Å–µ–π  | 20             | 15,000‚ÇΩ             | 1     | ‚úÖ (‚â•10)      | 15%     | 2,250‚ÇΩ  |
| –ú–∞—Ä–∏—è    | 15             | 12,000‚ÇΩ             | 2     | ‚úÖ (‚â•7)       | 13%     | 1,560‚ÇΩ  |
| –î–º–∏—Ç—Ä–∏–π  | 15             | 8,000‚ÇΩ              | 2     | ‚úÖ (‚â•7)       | 13%     | 1,040‚ÇΩ  |
| –ï–ª–µ–Ω–∞    | 15             | 20,000‚ÇΩ             | 2     | ‚úÖ (‚â•7)       | 13%     | 2,600‚ÇΩ  |
| –°–µ—Ä–≥–µ–π   | 10             | 5,000‚ÇΩ              | 3     | ‚úÖ (‚â•5)       | 11%     | 550‚ÇΩ    |
| –û–ª—å–≥–∞    | 10             | 18,000‚ÇΩ             | 3     | ‚úÖ (‚â•5)       | 11%     | 1,980‚ÇΩ  |
| –ò–≥–æ—Ä—å    | 8              | 3,000‚ÇΩ              | 4     | ‚úÖ (‚â•5)       | 11%     | 330‚ÇΩ    |

**–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:**
- –ê–ª–µ–∫—Å–µ–π ‚Äî **1 –º–µ—Å—Ç–æ** —Å 20 –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ ‚Üí –¥–æ—Å—Ç–∏–≥ –ø–æ—Ä–æ–≥–∞ 10 ‚Üí **15%**
- –ú–∞—Ä–∏—è, –î–º–∏—Ç—Ä–∏–π –∏ –ï–ª–µ–Ω–∞ ‚Äî **2 –º–µ—Å—Ç–æ** —Å 15 –Ω–æ–≤—ã—Ö ‚Üí –¥–æ—Å—Ç–∏–≥–ª–∏ –ø–æ—Ä–æ–≥–∞ 7 ‚Üí **13%**
- –°–µ—Ä–≥–µ–π –∏ –û–ª—å–≥–∞ ‚Äî **3 –º–µ—Å—Ç–æ** —Å 10 –Ω–æ–≤—ã—Ö ‚Üí –¥–æ—Å—Ç–∏–≥–ª–∏ –ø–æ—Ä–æ–≥–∞ 5 ‚Üí **11%**
- –ò–≥–æ—Ä—å ‚Äî **4 –º–µ—Å—Ç–æ** —Å 8 –Ω–æ–≤—ã—Ö ‚Üí —Ç–æ–∂–µ –¥–æ—Å—Ç–∏–≥ –ø–æ—Ä–æ–≥–∞ 5 –¥–ª—è 3-–≥–æ –º–µ—Å—Ç–∞, –Ω–æ –∑–∞–Ω—è–ª 4-—é –ø–æ–∑–∏—Ü–∏—é ‚Üí **11%** (–∫–∞–∫ –∑–∞ 3 –º–µ—Å—Ç–æ!)
- **–í–∞–∂–Ω–æ:** –ú–µ—Å—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É, –∞ –Ω–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤!

### –ü—Ä–∏–º–µ—Ä 5: –ö–æ–≥–¥–∞ –ø–æ—Ä–æ–≥ –ù–ï –¥–æ—Å—Ç–∏–≥–Ω—É—Ç

**–ù–µ–¥–µ–ª—è 2:**

| –£—á–∞—Å—Ç–Ω–∏–∫ | –ù–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ | –¢—Ä–∞—Ç—ã –≤—Å–µ—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ | –ú–µ—Å—Ç–æ | –î–æ—Å—Ç–∏–≥ –ø–æ—Ä–æ–≥–∞? | –ü—Ä–æ—Ü–µ–Ω—Ç | –í—ã–ø–ª–∞—Ç–∞ |
|----------|----------------|---------------------|-------|---------------|---------|---------|
| –í–∏–∫—Ç–æ—Ä   | 12             | 20,000‚ÇΩ             | 1     | ‚úÖ (‚â•10)      | 15%     | 3,000‚ÇΩ  |
| –ù–∞—Ç–∞–ª—å—è  | 8              | 15,000‚ÇΩ             | 2     | ‚úÖ (‚â•7)       | 13%     | 1,950‚ÇΩ  |
| –ê–Ω–¥—Ä–µ–π   | 4              | 10,000‚ÇΩ             | 3     | ‚ùå (<5)       | **10%** | 1,000‚ÇΩ  |
| –Æ–ª–∏—è     | 3              | 8,000‚ÇΩ              | 4     | ‚ùå (<5)       | 10%     | 800‚ÇΩ    |
| –ú–∞–∫—Å–∏–º   | 1              | 12,000‚ÇΩ             | 5     | ‚ùå (<5)       | 10%     | 1,200‚ÇΩ  |

**–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:**
- –í–∏–∫—Ç–æ—Ä –∑–∞–Ω—è–ª **1 –º–µ—Å—Ç–æ** —Å 12 –Ω–æ–≤—ã—Ö ‚Üí –¥–æ—Å—Ç–∏–≥ –ø–æ—Ä–æ–≥–∞ 10 ‚Üí **15%**
- –ù–∞—Ç–∞–ª—å—è –∑–∞–Ω—è–ª–∞ **2 –º–µ—Å—Ç–æ** —Å 8 –Ω–æ–≤—ã—Ö ‚Üí –¥–æ—Å—Ç–∏–≥–ª–∞ –ø–æ—Ä–æ–≥–∞ 7 ‚Üí **13%**
- –ê–Ω–¥—Ä–µ–π –∑–∞–Ω—è–ª **3 –º–µ—Å—Ç–æ** —Å 4 –Ω–æ–≤—ã—Ö ‚Üí **–ù–ï –¥–æ—Å—Ç–∏–≥** –ø–æ—Ä–æ–≥–∞ 5 ‚Üí –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ **10%** –≤–º–µ—Å—Ç–æ 11%
- –Æ–ª–∏—è –∏ –ú–∞–∫—Å–∏–º —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∞—é—Ç –±–∞–∑–æ–≤—ã–µ **10%**, —Ç–∞–∫ –∫–∞–∫ –Ω–µ –¥–æ—Å—Ç–∏–≥–ª–∏ –ø–æ—Ä–æ–≥–∞
- **–í—ã–≤–æ–¥:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–Ω—è—Ç—å –ø—Ä–∏–∑–æ–≤–æ–µ –º–µ—Å—Ç–æ ‚Äî –Ω—É–∂–Ω–æ –µ—â—ë –¥–æ—Å—Ç–∏—á—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞!

## API Endpoints

### 1. POST /api/referral/register
–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```json
{
  "telegramId": "123456",
  "username": "ivan_ivanov",
  "referrerTelegramId": "789012" // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "user": {
    "id": 1,
    "telegramId": "123456",
    "username": "ivan_ivanov",
    "balance": 0
  },
  "hasReferrer": true
}
```

### 2. GET /api/referral/leaderboard
–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ª–∏–¥–µ—Ä–±–æ—Ä–¥ –∑–∞ –Ω–µ–¥–µ–ª—é

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "weekStart": "2025-11-03T00:00:00.000Z",
  "weekEnd": "2025-11-09T23:59:59.999Z",
  "leaderboard": [
    {
      "position": 1,
      "referrer": {
        "username": "ivan_ivanov",
        "telegramId": "123456"
      },
      "newReferrals": 15, // –ù–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –∑–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é
      "totalSpending": 10000, // –¢—Ä–∞—Ç—ã –≤—Å–µ—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
      "payoutPercent": 15,
      "payoutAmount": 1500,
      "referralCount": 50, // –í—Å–µ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (–≤–∫–ª—é—á–∞—è —Å—Ç–∞—Ä—ã—Ö)
      "isPaid": false
    }
  ],
  "totalParticipants": 42
}
```

### 3. POST /api/referral/payout
–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–¥–µ–ª—å–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ cron)

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "message": "–í—ã–ø–ª–∞—á–µ–Ω–æ 42 —Ä–µ—Ñ–µ—Ä–∞–ª–∞–º",
  "weekStart": "2025-11-03T00:00:00.000Z",
  "weekEnd": "2025-11-09T23:59:59.999Z",
  "totalPayouts": 42,
  "payouts": [
    {
      "referrerId": 123,
      "position": 1,
      "newReferrals": 15,
      "totalSpending": 10000,
      "percent": 15,
      "payoutAmount": 1500
    }
  ]
}
```

### 4. GET /api/referral/payout?telegramId=123456
–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤—ã–ø–ª–∞—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "currentWeek": {
    "weekStart": "2025-11-10T00:00:00.000Z",
    "weekEnd": "2025-11-16T23:59:59.999Z",
    "newReferrals": 5,
    "totalSpending": 3500,
    "isPaid": false
  },
  "history": [
    {
      "weekStart": "2025-11-03T00:00:00.000Z",
      "weekEnd": "2025-11-09T23:59:59.999Z",
      "position": 1,
      "newReferrals": 15,
      "totalSpending": 10000,
      "percent": 15,
      "payoutAmount": 1500
    }
  ]
}
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞: WeeklyReferralStats

```prisma
model WeeklyReferralStats {
  id            Int      @id @default(autoincrement())
  referrerId    Int      // ID —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
  weekStart     DateTime // –ù–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏ (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 00:00)
  weekEnd       DateTime // –ö–æ–Ω–µ—Ü –Ω–µ–¥–µ–ª–∏ (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 23:59)
  newReferrals  Int      @default(0) // –ù–û–í–´–• —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –∑–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é (–¥–ª—è –ø–æ–∑–∏—Ü–∏–∏)
  totalSpending Int      @default(0) // –¢—Ä–∞—Ç—ã –í–°–ï–• —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (–¥–ª—è –≤—ã–ø–ª–∞—Ç—ã)
  payoutAmount  Int      @default(0) // –°—É–º–º–∞ –≤—ã–ø–ª–∞—Ç—ã
  payoutPercent Int      @default(0) // –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–ª–∞—Ç—ã
  leaderboardPosition Int? // –ü–æ–∑–∏—Ü–∏—è –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ
  isPaid        Boolean  @default(false) // –í—ã–ø–ª–∞—á–µ–Ω–æ –ª–∏
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@unique([referrerId, weekStart])
  @@index([weekStart, newReferrals]) // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–æ–≤—ã–º —Ä–µ—Ñ–µ—Ä–∞–ª–∞–º
  @@index([isPaid, weekEnd])
}
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã–ø–ª–∞—Ç

### Vercel Cron (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `vercel.json`:
```json
{
  "crons": [
    {
      "path": "/api/referral/payout",
      "schedule": "59 23 * * 0"
    }
  ]
}
```

–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: `59 23 * * 0` = –∫–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 23:59

## –ú–æ—Ç–∏–≤–∞—Ü–∏—è –¥–ª—è —Ä–µ—Ñ–µ—Ä–µ—Ä–æ–≤

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:

1. **–†–∞–≤–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é**
   - –ù–µ –≤–∞–∂–Ω–æ, —Å–∫–æ–ª—å–∫–æ —É —Ç–µ–±—è —É–∂–µ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
   - –ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é –≤—Å–µ –Ω–∞—á–∏–Ω–∞—é—Ç —Å 0 –Ω–æ–≤—ã—Ö –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
   - –ù–æ–≤–∏—á–∫–∏ –º–æ–≥—É—Ç –æ–±–æ–≥–Ω–∞—Ç—å –≤–µ—Ç–µ—Ä–∞–Ω–æ–≤

2. **–î–≤–æ–π–Ω–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è**
   - –ü—Ä–∏–≤–ª–µ–∫–∞—Ç—å –Ω–æ–≤—ã—Ö ‚Üí –¥–ª—è —Ö–æ—Ä–æ—à–µ–≥–æ –º–µ—Å—Ç–∞
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å—Ç–∞—Ä—ã—Ö ‚Üí –¥–ª—è –±–æ–ª—å—à–∏—Ö –≤—ã–ø–ª–∞—Ç

3. **–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–µ –≤—ã–ø–ª–∞—Ç—ã**
   - –ú–Ω–æ–≥–æ –Ω–æ–≤—ã—Ö + –º–∞–ª—ã–µ —Ç—Ä–∞—Ç—ã = —Ç–æ–ø-3 –º–µ—Å—Ç–æ, –Ω–æ –º–µ–Ω—å—à–∞—è –≤—ã–ø–ª–∞—Ç–∞
   - –ú–∞–ª–æ –Ω–æ–≤—ã—Ö + –±–æ–ª—å—à–∏–µ —Ç—Ä–∞—Ç—ã = –Ω–∏–∑–∫–æ–µ –º–µ—Å—Ç–æ, –Ω–æ –±–æ–ª—å—à–∞—è –≤—ã–ø–ª–∞—Ç–∞
   - –ò–¥–µ–∞–ª—å–Ω–æ: –º–Ω–æ–≥–æ –Ω–æ–≤—ã—Ö + –±–æ–ª—å—à–∏–µ —Ç—Ä–∞—Ç—ã = –º–∞–∫—Å–∏–º—É–º!

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π:

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è "–ú–∞—Å—Å–æ–≤–æ–µ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ":**
- 20 –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –≤ –Ω–µ–¥–µ–ª—é
- –ö–∞–∂–¥—ã–π —Ç—Ä–∞—Ç–∏—Ç –ø–æ 100‚ÇΩ
- –ü–æ–∑–∏—Ü–∏—è: **1 –º–µ—Å—Ç–æ** (15%)
- –í—ã–ø–ª–∞—Ç–∞: `2,000 √ó 15% = 300‚ÇΩ`

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∞–∑–∞":**
- 2 –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–∞ –≤ –Ω–µ–¥–µ–ª—é
- 50 —Å—Ç–∞—Ä—ã—Ö + 2 –Ω–æ–≤—ã—Ö —Ç—Ä–∞—Ç—è—Ç –ø–æ 500‚ÇΩ
- –ü–æ–∑–∏—Ü–∏—è: **8 –º–µ—Å—Ç–æ** (10%)
- –í—ã–ø–ª–∞—Ç–∞: `26,000 √ó 10% = 2,600‚ÇΩ`

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è "–ó–æ–ª–æ—Ç–∞—è —Å–µ—Ä–µ–¥–∏–Ω–∞":**
- 10 –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –≤ –Ω–µ–¥–µ–ª—é
- 30 —Å—Ç–∞—Ä—ã—Ö + 10 –Ω–æ–≤—ã—Ö —Ç—Ä–∞—Ç—è—Ç –ø–æ 400‚ÇΩ
- –ü–æ–∑–∏—Ü–∏—è: **2 –º–µ—Å—Ç–æ** (13%)
- –í—ã–ø–ª–∞—Ç–∞: `16,000 √ó 13% = 2,080‚ÇΩ`

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –∏ –ø–æ—Ä–æ–≥–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ [src/config/video-tariffs.ts](src/config/video-tariffs.ts:90-124):

```typescript
// –ü—Ä–æ—Ü–µ–Ω—Ç—ã –ø–æ –º–µ—Å—Ç–∞–º
export const REFERRAL_LEADERBOARD_PERCENTAGES = {
  1: 15, // 1 –º–µ—Å—Ç–æ - 15%
  2: 13, // 2 –º–µ—Å—Ç–æ - 13%
  3: 11, // 3 –º–µ—Å—Ç–æ - 11%
  default: 10, // –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Å—Ç–∞ - 10%
};

// –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –ø—Ä–∏–∑–æ–≤—ã—Ö –º–µ—Å—Ç
export const REFERRAL_TIER_THRESHOLDS = {
  1: 10, // –î–ª—è 1 –º–µ—Å—Ç–∞ –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 10 –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
  2: 7,  // –î–ª—è 2 –º–µ—Å—Ç–∞ –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 7 –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
  3: 5,  // –î–ª—è 3 –º–µ—Å—Ç–∞ –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 5 –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
};

export function getReferralPercent(position: number, newReferrals: number): number {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –¥–ª—è —Å–≤–æ–µ–π –ø–æ–∑–∏—Ü–∏–∏
  if (position === 1 && newReferrals >= REFERRAL_TIER_THRESHOLDS[1]) {
    return REFERRAL_LEADERBOARD_PERCENTAGES[1];
  }
  if (position === 2 && newReferrals >= REFERRAL_TIER_THRESHOLDS[2]) {
    return REFERRAL_LEADERBOARD_PERCENTAGES[2];
  }
  if (position === 3 && newReferrals >= REFERRAL_TIER_THRESHOLDS[3]) {
    return REFERRAL_LEADERBOARD_PERCENTAGES[3];
  }

  // –ï—Å–ª–∏ –Ω–µ –¥–æ—Å—Ç–∏–≥ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ –¥–ª—è —Å–≤–æ–µ–π –ø–æ–∑–∏—Ü–∏–∏, –ø–æ–ª—É—á–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ 10%
  return REFERRAL_LEADERBOARD_PERCENTAGES.default;
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞:
```bash
curl -X POST http://localhost:3000/api/referral/register \
  -H "Content-Type: application/json" \
  -d '{"telegramId": "999", "username": "test_user", "referrerTelegramId": "123456"}'
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–∏–¥–µ—Ä–±–æ—Ä–¥:
```bash
curl http://localhost:3000/api/referral/leaderboard
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –≤—ã–ø–ª–∞—Ç (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):
```bash
curl -X POST http://localhost:3000/api/referral/payout
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤—ã–ø–ª–∞—Ç:
```bash
curl "http://localhost:3000/api/referral/payout?telegramId=123456"
```
